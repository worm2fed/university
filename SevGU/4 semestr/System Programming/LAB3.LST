Turbo Assembler	 Version 3.0	    05/21/15 19:23:18	    Page 1
lab3.asm



      1	0000			     LAB SEGMENT						     ; Имя сегмента
      2					     ASSUME CS:LAB,DS:LAB			     ; Имя сегмента кода	и  +
      3				     данных
      4						     ORG 100H						     ; Для		    +
      5				     COM-файлов программа
      6														     ;		    +
      7				     начинается с адреса 100H
      8	0100  EB 70 90				     START: JMP	main
      9	0103  41 42 43 44 45 46	47+			     PACK db 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'	     ;		    +
     10	      48 49 4A 4B 4C 4D	4E+  исходная таблица
     11	      4F 50 51 52 53 54	55+
     12	      56 57 58 59 5A 30	31+
     13	      32 33 34 35 36 37	38+
     14	      39
     15	0127  33 4C 58 36 51 4B	42+			     UNPACK db '3LX6QKBJ8EWCUZ7SF1MGN4DO25AP9HRIVY0T'	     ;		    +
     16	      4A 38 45 57 43 55	5A+  таблица кодировки
     17	      37 53 46 31 4D 47	4E+
     18	      34 44 4F 32 35 41	50+
     19	      39 48 52 49 56 59	30+
     20	      54
     21	014B  42 4E 44 53 33 49	45+			     CADRDATA db 'BNDS3IEND04DVVVV'					    +
     22	      4E 44 30 34 44 56	56+  ; данные для расшифровки
     23	      56 56
     24	015B  00000041					     PP	dd 41H								    +
     25				     ; преамбула
     26	015F  10*(??)					     DATA db 16	dup(?)							    +
     27				     ; данные после расшифровки
     28	016F  ????					     SUMMA dw ?								    +
     29				     ; контрольная сумма
     30	0171  FF					     KK	db 0FFH								    +
     31				     ; конец кадра
     32
     33	0172						     main:
     34	0172  BE 014Br						     LEA SI, CADRDATA		     ; адреса данных    +
     35				     для распаковки в индекс источник SI
     36	0175  B9 0010						     MOV CX, 16			     ; 16 символов, в	    +
     37				     регистр CX число 16, повторений цикла.
     38	0178  BA 0000						     MOV DX, 0				     ; обнуление   +
     39				     для вычисления суммы.
     40	017B  B4 00						     MOV AH, 0
     41
     42	017D						     M1:
     43	017D  BF 0103r						     LEA DI, PACK		     ; в индекс		    +
     44				     приёмник значения из таблицы pack.
     45	0180  8B D9						     MOV BX, CX				     ; bx <- cx
     46	0182  B9 0024						     MOV CX, 36				     ; cx <- 36
     47	0185  AC						     LODSB				     ; загрузить   +
     48				     из памяти байт	в регистр Al
     49	0186  F2> AE						     REPNE SCASB		     ; сравнить		    +
     50				     текущий символ в AL c D (UNPACK) повторять пока	z!=0
     51	0188  8B CB						     MOV CX, BX				     ; cx <- bx		    +
     52				     возвращаем значение 16.
     53	018A  BB 0010						     MOV BX, 16				     ; bx <- 16
     54	018D  2B D9						     SUB BX, CX				     ; куда		    +
     55				     записывать значение, bx-cx
     56	018F  8A 45 23						     MOV AL, [DI+35]		     ; в Al значение для+
     57				     перекодировки.
Turbo Assembler	 Version 3.0	    05/21/15 19:23:18	    Page 2
lab3.asm



     58	0192  8D BF 015Fr					     LEA DI, DATA+BX		     ; в индекс		    +
     59				     приемник загрузить адреса данных+значение.
     60	0196  AA						     STOSB				     ; записать	    +
     61				     значение регистра al  в память.
     62	0197  03 D0						     ADD DX, AX				     ; Dx+Ax		    +
     63				     арифметическая сумма всех байт поля
     64	0199  89 16 016Fr					     MOV [SUMMA], DX		     ; значение	из dx	    +
     65				     отправить	в поле памяти SUMMA.
     66	019D  E2 DE						     LOOP M1				     ; CX-1, if	CX !=0	то+
     67				     переход по M1, иначе	к следующей команде.
     68	019F  CD 20						     INT 20H
     69
     70	01A1				     LAB ENDS
     71				     END START
Turbo Assembler	 Version 3.0	    05/21/15 19:23:18	    Page 3
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "05/21/15"
??FILENAME			  Text	 "lab3	  "
??TIME				  Text	 "19:23:18"
??VERSION			  Number 0300
@CPU				  Text	 0101H
@CURSEG				  Text	 LAB
@FILENAME			  Text	 LAB3
@WORDSIZE			  Text	 2
CADRDATA			  Byte	 LAB:014B
DATA				  Byte	 LAB:015F
KK				  Byte	 LAB:0171
M1				  Near	 LAB:017D
MAIN				  Near	 LAB:0172
PACK				  Byte	 LAB:0103
PP				  Dword	 LAB:015B
START				  Near	 LAB:0100
SUMMA				  Word	 LAB:016F
UNPACK				  Byte	 LAB:0127

Groups & Segments		  Bit Size Align  Combine Class

LAB				  16  01A1 Para	  none
